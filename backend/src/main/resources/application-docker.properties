# Docker Profile Configuration
# This profile is used when running in Docker containers

# Database Configuration for Docker
spring.datasource.url=jdbc:postgresql://postgres:5432/nimas2pdf
spring.datasource.driverClassName=org.postgresql.Driver
spring.datasource.username=nimas2pdf
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# JPA Configuration for Docker
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# File Upload Configuration for Docker
spring.servlet.multipart.max-file-size=500MB
spring.servlet.multipart.max-request-size=500MB

# Logging Configuration for Docker
logging.level.org.eightfoldconsulting.nimas2pdf=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# File Storage Paths for Docker
app.upload.dir=/app/uploads
app.output.dir=/app/outputs

# Conversion Settings for Docker
app.conversion.timeout=600000
app.conversion.max-concurrent=3

# CORS Configuration for Docker
app.cors.allowed-origins=http://localhost:3000,http://localhost:3001,http://frontend:3000
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*

# OAuth2 Configuration for Docker
# Override OAuth2 redirect URIs for Docker environment
spring.security.oauth2.client.registration.google.redirect-uri=http://localhost:8080/login/oauth2/code/google
spring.security.oauth2.client.registration.github.redirect-uri=http://localhost:8080/login/oauth2/code/github
spring.security.oauth2.client.registration.microsoft.redirect-uri=http://localhost:8080/login/oauth2/code/microsoft

# Session Configuration for Docker
server.servlet.session.cookie.domain=localhost
server.servlet.session.cookie.path=/
server.servlet.session.cookie.http-only=true

# Security logging for Docker
logging.level.org.springframework.security=INFO
